import{u as y,h as x,i as b,j}from"./q-BGn6y-sR.js";import{b as g}from"./q-BGn6y-sR.js";import{a as E,d as q,b as k}from"./q-Bfk6EzJ6.js";import"./q-A-kmwYN-.js";const A=async function(...s){const[u,d,i,h,a]=y(),n=s.length>0&&s[0]instanceof AbortSignal?s.shift():void 0;{const r=x(),w=s.map(t=>t instanceof SubmitEvent&&t.target instanceof HTMLFormElement?new FormData(t.target):t instanceof Event||t instanceof Node?null:t),c=a.getHash();let l="";const f={...u,method:i,headers:{...d,"Content-Type":"application/qwik-json",Accept:"application/json, application/qwik-json, text/qwik-json-stream, text/plain","X-QRL":c},signal:n},p=await b([a,...w]);i==="GET"?l+=`&${k}=${encodeURIComponent(p)}`:f.body=p;const e=await fetch(`${h}?${E}=${c}${l}`,f),o=e.headers.get("Content-Type");if(e.ok&&o==="text/qwik-json-stream"&&e.body)return async function*(){try{for await(const t of q(e.body,r??document.documentElement,n))yield t}finally{n!=null&&n.aborted||await e.body.cancel()}}();if(o==="application/qwik-json"){const t=await e.text(),m=await j(t,r??document.documentElement);if(e.status>=400)throw m;return m}else if(o==="application/json"){const t=await e.json();if(e.status>=400)throw t;return t}else if(o==="text/plain"||o==="text/html"){const t=await e.text();if(e.status>=400)throw t;return t}}};export{g as _hW,A as s_BqZpRhIgrDk};
