import{u as b,h as C}from"./q-BGn6y-sR.js";import{b as K}from"./q-BGn6y-sR.js";import{K as g,q as c,x as m,F as f,r as n,A as w,B as R,z as E,o as _,w as x}from"./q-Bfk6EzJ6.js";import{c as I,m as L,r as B}from"./q-Bb_NaC5i.js";import"./q-A-kmwYN-.js";const k=async(r,s)=>{const[p,v,i,u]=b(),{type:a="link",forceReload:l=r===void 0,replaceState:d=!1,scroll:y=!0}=typeof s=="object"?s:{forceReload:s};n.navCount++;const t=i.value.dest,e=r===void 0?t:typeof r=="number"?r:g(r,u.url);if(c.$cbs$&&(l||typeof e=="number"||!m(e,t)||!f(e,t))){const o=n.navCount,S=await Promise.all([...c.$cbs$.values()].map(h=>h(e)));if(o!==n.navCount||S.some(Boolean)){o===n.navCount&&a==="popstate"&&history.pushState(null,"",t);return}}if(typeof e=="number"){history.go(e);return}if(!f(e,t)){location.href=e.href;return}if(!l&&m(e,t)){{a==="link"&&e.href!==location.href&&history.pushState(null,"",e);const o=document.getElementById(w)??document.documentElement;R(a,e,new URL(location.href),o,E()),a==="popstate"&&(window._qCityScrollEnabled=!0)}return}return i.value={type:a,dest:e,forceReload:l,replaceState:d,scroll:y},_(e,C()),x(B,L,I,e.pathname),p.value=void 0,u.isNavigating=!0,new Promise(o=>{v.r=o})};export{K as _hW,k as s_EMotMpibBPw};
