import{u as L,g as x,B as S,r as g,G as O,N as B,q as m,l as r,k as a,F as h,_ as l,j as F,O as w,_hW as D}from"./q-DkOvt7MH.js";import{a as E,u as k,_ as b}from"./q-CV_dOpHt.js";import{A as y,S as R,a as C}from"./q-C4egodov.js";import{R as e,L as Y,a as $,p as Q}from"./q-COTYnR-K.js";import{c as A}from"./q-CIrWlV7l.js";import{a as M,T as V}from"./q-BpuyPP9Q.js";import"./q-DuTLu4R3.js";import"./q-B-sl8U8E.js";function q(){return L(M)}const N=()=>{const[i,t]=x();return i.value!==null&&t.value},U=Object.freeze(Object.defineProperty({__proto__:null,s_tdj1590kPgo:N},Symbol.toStringTag,{value:"Module"})),tl=()=>{S();const i=E(),t=g(null),d=k(),o=q(),n=g(null),c=g(!0),p=g(!1),_=O(m(()=>b(()=>Promise.resolve().then(()=>U),void 0),"s_tdj1590kPgo",[t,p])),u={[e.tconst]:"",[e.primaryTitle]:"",[e.averageRating]:0,[e.numVotes]:0};B(m(()=>b(()=>Promise.resolve().then(()=>z),void 0),"s_4GIYZO7LQKE",[t,p,c,i,d,n]));const j=m(()=>b(()=>Promise.resolve().then(()=>Z),void 0),"s_lFqDbFw2DNU",[o]);return r(y,{isPending:c,get onPending(){return w(h,{children:"◔_◔ ..."})},onResolved:t.value===null?r(h,{children:"(/◔ ◡ ◔)/"},3,"vB_0"):r(y,{delay:1e3,isPending:_,get onPending(){return w(h,{children:"◔_◔ ..."})},onResolved:n.value!==null?r(R,{class:A("grow gap-y-6",o.isFullscreen&&"h-main",!o.isFullscreen&&"pb-12"),children:[l("div",null,{class:"gap-y-1"},[r(C,{level:2,children:n.value[e.primaryTitle],[a]:{level:a}},1,"vB_1"),l("div",null,{class:"text-ink-5 overflow-hidden text-xs text-ellipsis whitespace-nowrap"},[l("span",null,null,[n.value[e.startYear]," - ",n.value[e.endYear]],1,null),l("span",null,{class:"px-2"},"|",3,null),l("span",null,null,n.value[e.averageRating],1,null),l("span",null,{class:"px-2"},"|",3,null),l("span",null,null,n.value[e.genres].join(", "),1,null)],1,null)],1,null),l("div",null,{class:"grow overflow-auto"},l("div",null,{class:"rategrid",role:"region","aria-label":"ratings table",tabIndex:0},l("table",null,null,[l("thead",null,null,l("tr",null,null,[l("th",null,null,l("div",null,null,l("button",null,{type:"button",title:F(s=>`Click to ${s.isFullscreen?"enter":"exit"} fullscreen`,[o]),class:"cursor-pointer",onClick$:j},o.isFullscreen?r(Y,{class:"icon-collapse","aria-label":"collapse icon",[a]:{class:a,"aria-label":a}},3,"vB_2"):r($,{class:"icon-expand","aria-label":"expand icon",[a]:{class:a,"aria-label":a}},3,"vB_3"),1,null),1,null),1,null),n.value[e.seasonsIndex].map(s=>l("th",null,null,l("div",null,null,s,1,null),1,s))],1,null),1,null),l("tbody",null,null,n.value[e.episodeIndex].map(s=>l("tr",null,null,[l("th",null,null,l("div",null,null,s,1,null),1,null),n.value[e.seasonsIndex].map(f=>{var P,T;const v=((T=(P=n.value[e.episodeMap])==null?void 0:P[f])==null?void 0:T[s])??u,I=~~v[e.averageRating];return l("td",{class:A(v[e.averageRating]!==u[e.averageRating]&&`text-white bg-rating-${I-1}`),title:v[e.primaryTitle]},null,l("div",null,null,v[e.averageRating]!==u[e.averageRating]?v[e.averageRating]:"",1,null),1,`${f}-${s}`)})],1,s)),1,null)],1,null),1,null),1,null)]},1,"vB_4"):r(R,{children:l("p",null,null,["You might know ",l("span",null,{class:"bg-paper-9 px-2"},F(s=>s.value,[t]),3,null),", but i haven't heard of it :("],3,null)},3,"vB_5"),[a]:{delay:a,isPending:a,onPending:a}},3,"vB_6"),[a]:{isPending:a,onPending:a}},3,"vB_7")},G=async({track:i})=>{const[t,d,o,n,c,p]=x();i(()=>n.params.api),i(()=>n.url.search),n.params.api in V||(c("/rategrid/tv/",{replaceState:!0}),p.value=null);const _=new URL(window.location.href);if(t.value=_.searchParams.get("id"),o.value=!1,t.value===null)return;if(t.value.length===0){c(`/rategrid/tv/${n.params.api}/`,{replaceState:!0}),t.value=null;return}d.value=!0;const u=(await Q.get()[n.params.api]().tv().details({id:t.value}).fetch()).data;window.document.title=`${u===null?"":`${u[e.primaryTitle]} (${u[e.startYear]}) | `}tv | rategrid`,p.value=u,d.value=!1},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:D,s_4GIYZO7LQKE:G},Symbol.toStringTag,{value:"Module"})),K=()=>{const[i]=x();i.isFullscreen=!i.isFullscreen},Z=Object.freeze(Object.defineProperty({__proto__:null,_hW:D,s_lFqDbFw2DNU:K},Symbol.toStringTag,{value:"Module"}));export{G as a,K as b,tl as s,N as s_tdj1590kPgo,q as u};
