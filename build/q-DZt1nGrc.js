import{h as F,m as I,j as ne,b as V,r as Ie,q as x,s as O,N as J,K as Se,l as v,k as xe,_hW as R}from"./q-B07PLbO6.js";import{_ as k,u as ke,a as Te}from"./q-D8aq-jmy.js";import{f as A,p as re,H as ze,a as G,b as X,c as Oe,d as Ce,e as Me,g as Ee,h as Ve,i as Fe,j as Le}from"./q-D8qb1N0X.js";var je=Object.defineProperty,ce=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,ae=(n,e,t)=>e in n?je(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,M=(n,e)=>{for(var t in e||(e={}))Re.call(e,t)&&ae(n,t,e[t]);if(ce)for(var t of ce(e))De.call(e,t)&&ae(n,t,e[t]);return n},ue=(n,e,t)=>new Promise((s,i)=>{var o=a=>{try{c(t.next(a))}catch(u){i(u)}},r=a=>{try{c(t.throw(a))}catch(u){i(u)}},c=a=>a.done?s(a.value):Promise.resolve(a.value).then(o,r);c((t=t.apply(n,e)).next())}),Ae={JSON:"application/json"},qe={Default:"get"},p={Bit:"bit",Boolean:"boolean",ImdbMap:"imdbMap",ImdbMapIndex:"imdbMapIndex",ImdbTitleType:"imdbTitleType",Number:"number",String:"string",StringArray:"stringArray"},P=n=>{let e={};for(let t in n)e[t]=n[t].key,delete n[t];return e},le="imdb",Ne="tv",Pe="search.json";P({tconst:{key:"tconst",_required:!0,_type:p.String},titleType:{key:"titleType",_required:!0,_type:p.ImdbTitleType},primaryTitle:{key:"primaryTitle",_required:!0,_type:[p.String,p.Number]},originalTitle:{key:"originalTitle",_required:!0,_type:p.String},isAdult:{key:"isAdult",_required:!0,_type:p.Bit},startYear:{key:"startYear",_required:!1,_type:p.Number},endYear:{key:"endYear",_required:!1,_type:p.Number},runtimeMinutes:{key:"runtimeMinutes",_required:!1,_type:p.Number},genres:{key:"genres",_required:!1,_type:p.String}}),P({tconst:{key:"tconst",_required:!0,_type:p.String},parentTconst:{key:"parentTconst",_required:!0,_type:p.String},seasonNumber:{key:"seasonNumber",_required:!1,_type:p.Number},episodeNumber:{key:"episodeNumber",_required:!1,_type:p.Number}}),P({tconst:{key:"tconst",_required:!0,_type:p.String},averageRating:{key:"averageRating",_required:!0,_type:p.Number},numVotes:{key:"numVotes",_required:!0,_type:p.Number}});var S=P({tconst:{key:"id",_required:!0,_type:p.String},primaryTitle:{key:"pT",_required:!0,_type:p.String},startYear:{key:"sY",_required:!1,_type:p.Number},endYear:{key:"eY",_required:!1,_type:p.Number},runtimeMinutes:{key:"rM",_required:!1,_type:p.Number},averageRating:{key:"aR",_required:!0,_type:p.Number},numVotes:{key:"nV",_required:!0,_type:p.Number},isAdult:{key:"iA",_required:!0,_type:p.Boolean},genres:{key:"g",_required:!0,_type:p.StringArray},episodeIndex:{key:"eI",_required:!0,_type:p.ImdbMapIndex},seasonsIndex:{key:"sI",_required:!0,_type:p.ImdbMapIndex},episodeMap:{key:"eM",_required:!0,_type:p.ImdbMap}}),$e=n=>({[le]:()=>(n=new j({baseUrl:`/${le}`,requestInit:{headers:{accept:Ae.JSON}}},n),{tv:()=>(n=new j({baseUrl:`/${Ne}`},n),{search:()=>(n=new j({baseUrl:`/${Pe}`},n),Z.prepareRequest(n)),details:({id:e})=>(n=new j({baseUrl:`/${e}.json`},n),Z.prepareRequest(n))})})}),We=class{static encodeSubstring(n){return encodeURIComponent(n)}static query(n){let e=Object.keys(n);if(e.length===0)return"";let t="?";for(let s=0;s<e.length;s++){let i=e[s],o=n[i];o!==void 0&&(t+=`${i}=${this.encodeSubstring(o)}&`)}return t.slice(0,-1)}},j=class{constructor(n,e){this.baseUrl="",this.params={},this.requestInit={},this.responseType="json";var t;e&&(this.baseUrl=e.baseUrl,this.params=e.params,this.requestInit=e.requestInit,this.responseType=e.responseType),n.baseUrl&&(this.baseUrl+=n.baseUrl),this.params=M(M({},this.params),n.params),this.requestInit=M(M({},this.requestInit),n.requestInit),this.responseType=(t=n.responseType)!=null?t:this.responseType}},Z=class{static fetch(n,e){return ue(this,null,function*(){let t=new AbortController,s={controller:t,data:null,exception:null,hasException:!0,isAborted:!1,isSuccess:!1};try{let i=yield fetch(n,M({signal:t.signal},e.requestInit)),o=yield i[e.responseType]();return s.isSuccess=i.ok,s.hasException=!1,s.data=o,s}catch(i){return s.isSuccess=!1,s.hasException=!0,s.exception=i,i instanceof Error&&i.name==="AbortError"&&(s.isAborted=!0),s}})}static prepareRequest(n){let e=`${n.baseUrl}${We.query(n.params)}`;return{url:e,request:n,fetch:()=>ue(this,null,function*(){return this.fetch(e,n)})}}static get(){let n=new j({baseUrl:`https://raw.githubusercontent.com/fatherbrennan/api/refs/heads/${qe.Default}`,requestInit:{method:"GET"}});return M({},$e(n))}};const Ue="ENTRIES",_e="KEYS",pe="VALUES",y="";class Y{constructor(e,t){const s=e._tree,i=Array.from(s.keys());this.set=e,this._type=t,this._path=i.length>0?[{node:s,keys:i}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=C(this._path);if(C(t)===y)return{done:!1,value:this.result()};const s=e.get(C(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=C(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>C(e)).filter(e=>e!==y).join("")}value(){return C(this._path).node.get(y)}result(){switch(this._type){case pe:return this.value();case _e:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const C=n=>n[n.length-1],Je=(n,e,t)=>{const s=new Map;if(e===void 0)return s;const i=e.length+1,o=i+t,r=new Uint8Array(o*i).fill(t+1);for(let c=0;c<i;++c)r[c]=c;for(let c=1;c<o;++c)r[c*i]=c;return ge(n,e,t,s,r,1,i,""),s},ge=(n,e,t,s,i,o,r,c)=>{const a=o*r;e:for(const u of n.keys())if(u===y){const l=i[a-1];l<=t&&s.set(c,[n.get(u),l])}else{let l=o;for(let f=0;f<u.length;++f,++l){const d=u[f],_=r*l,g=_-r;let h=i[_];const m=Math.max(0,l-t-1),w=Math.min(r-1,l+t);for(let b=m;b<w;++b){const W=d!==e[b],U=i[g+b]+ +W,D=i[g+b+1]+1,z=i[_+b]+1,L=i[_+b+1]=Math.min(U,D,z);L<h&&(h=L)}if(h>t)continue e}ge(n.get(u),e,t,s,i,l,r,c+u)}};class T{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,s]=$(this._tree,e.slice(this._prefix.length));if(t===void 0){const[i,o]=ie(s);for(const r of i.keys())if(r!==y&&r.startsWith(o)){const c=new Map;return c.set(r.slice(o.length),i.get(r)),new T(c,e)}}return new T(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Ye(this._tree,e)}entries(){return new Y(this,Ue)}forEach(e){for(const[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return Je(this._tree,e,t)}get(e){const t=ee(this._tree,e);return t!==void 0?t.get(y):void 0}has(e){const t=ee(this._tree,e);return t!==void 0&&t.has(y)}keys(){return new Y(this,_e)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,B(this._tree,e).set(y,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=B(this._tree,e);return s.set(y,t(s.get(y))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=B(this._tree,e);let i=s.get(y);return i===void 0&&s.set(y,i=t()),i}values(){return new Y(this,pe)}[Symbol.iterator](){return this.entries()}static from(e){const t=new T;for(const[s,i]of e)t.set(s,i);return t}static fromObject(e){return T.from(Object.entries(e))}}const $=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(const s of n.keys())if(s!==y&&e.startsWith(s))return t.push([n,s]),$(n.get(s),e.slice(s.length),t);return t.push([n,e]),$(void 0,"",t)},ee=(n,e)=>{if(e.length===0||n==null)return n;for(const t of n.keys())if(t!==y&&e.startsWith(t))return ee(n.get(t),e.slice(t.length))},B=(n,e)=>{const t=e.length;e:for(let s=0;n&&s<t;){for(const o of n.keys())if(o!==y&&e[s]===o[0]){const r=Math.min(t-s,o.length);let c=1;for(;c<r&&e[s+c]===o[c];)++c;const a=n.get(o);if(c===o.length)n=a;else{const u=new Map;u.set(o.slice(c),a),n.set(e.slice(s,s+c),u),n.delete(o),n=u}s+=c;continue e}const i=new Map;return n.set(e.slice(s),i),i}return n},Ye=(n,e)=>{const[t,s]=$(n,e);if(t!==void 0){if(t.delete(y),t.size===0)be(s);else if(t.size===1){const[i,o]=t.entries().next().value;ye(s,i,o)}}},be=n=>{if(n.length===0)return;const[e,t]=ie(n);if(e.delete(t),e.size===0)be(n.slice(0,-1));else if(e.size===1){const[s,i]=e.entries().next().value;s!==y&&ye(n.slice(0,-1),s,i)}},ye=(n,e,t)=>{if(n.length===0)return;const[s,i]=ie(n);s.set(i+e,t),s.delete(i)},ie=n=>n[n.length-1],oe="or",we="and",Be="and_not";class E{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?K:e.autoVacuum;this._options={...Q,...e,autoVacuum:t,searchOptions:{...de,...e.searchOptions||{}},autoSuggestOptions:{...Xe,...e.autoSuggestOptions||{}}},this._index=new T,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=se,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:s,processTerm:i,fields:o,idField:r}=this._options,c=t(e,r);if(c==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);if(this._idToShortId.has(c))throw new Error(`MiniSearch: duplicate ID ${c}`);const a=this.addDocumentId(c);this.saveStoredFields(a,e);for(const u of o){const l=t(e,u);if(l==null)continue;const f=s(l.toString(),u),d=this._fieldIds[u],_=new Set(f).size;this.addFieldLength(a,d,this._documentCount-1,_);for(const g of f){const h=i(g,u);if(Array.isArray(h))for(const m of h)this.addTerm(d,a,m);else h&&this.addTerm(d,a,h)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:s=10}=t,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:r}=e.reduce(({chunk:c,promise:a},u,l)=>(c.push(u),(l+1)%s===0?{chunk:[],promise:a.then(()=>new Promise(f=>setTimeout(f,0))).then(()=>this.addAll(c))}:{chunk:c,promise:a}),i);return r.then(()=>this.addAll(o))}remove(e){const{tokenize:t,processTerm:s,extractField:i,fields:o,idField:r}=this._options,c=i(e,r);if(c==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);const a=this._idToShortId.get(c);if(a==null)throw new Error(`MiniSearch: cannot remove document with ID ${c}: it is not in the index`);for(const u of o){const l=i(e,u);if(l==null)continue;const f=t(l.toString(),u),d=this._fieldIds[u],_=new Set(f).size;this.removeFieldLength(a,d,this._documentCount,_);for(const g of f){const h=s(g,u);if(Array.isArray(h))for(const m of h)this.removeTerm(d,a,m);else h&&this.removeTerm(d,a,h)}}this._storedFields.delete(a),this._documentIds.delete(a),this._idToShortId.delete(c),this._fieldLength.delete(a),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new T,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,i)=>{this.removeFieldLength(t,i,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:i},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:s}=this._options,i=s(e,t);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=se,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,t){const s=this._dirtCount;if(this.vacuumConditionsMet(t)){const i=e.batchSize||te.batchSize,o=e.batchWait||te.batchWait;let r=1;for(const[c,a]of this._index){for(const[u,l]of a)for(const[f]of l)this._documentIds.has(f)||(l.size<=1?a.delete(u):l.delete(f));this._index.get(c).size===0&&this._index.delete(c),r%i===0&&await new Promise(u=>setTimeout(u,o)),r+=1}this._dirtCount-=s}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||K.minDirtCount,s=s||K.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const{searchOptions:s}=this._options,i={...s,...t},o=this.executeQuery(e,t),r=[];for(const[c,{score:a,terms:u,match:l}]of o){const f=u.length||1,d={id:this._documentIds.get(c),score:a*f,terms:Object.keys(l),queryTerms:u,match:l};Object.assign(d,this._storedFields.get(c)),(i.filter==null||i.filter(d))&&r.push(d)}return e===E.wildcard&&i.boostDocument==null||r.sort(fe),r}autoSuggest(e,t={}){t={...this._options.autoSuggestOptions,...t};const s=new Map;for(const{score:o,terms:r}of this.search(e,t)){const c=r.join(" "),a=s.get(c);a!=null?(a.score+=o,a.count+=1):s.set(c,{score:o,terms:r,count:1})}const i=[];for(const[o,{score:r,terms:c,count:a}]of s)i.push({suggestion:o,terms:c,score:r/a});return i.sort(fe),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static async loadJSONAsync(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)}static getDefault(e){if(Q.hasOwnProperty(e))return H(Q,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:c}=e,a=this.instantiateMiniSearch(e,t);a._documentIds=q(i),a._fieldLength=q(o),a._storedFields=q(r);for(const[u,l]of a._documentIds)a._idToShortId.set(l,u);for(const[u,l]of s){const f=new Map;for(const d of Object.keys(l)){let _=l[d];c===1&&(_=_.ds),f.set(parseInt(d,10),q(_))}a._index.set(u,f)}return a}static async loadJSAsync(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:c}=e,a=this.instantiateMiniSearch(e,t);a._documentIds=await N(i),a._fieldLength=await N(o),a._storedFields=await N(r);for(const[l,f]of a._documentIds)a._idToShortId.set(f,l);let u=0;for(const[l,f]of s){const d=new Map;for(const _ of Object.keys(f)){let g=f[_];c===1&&(g=g.ds),d.set(parseInt(_,10),await N(g))}++u%1e3===0&&await ve(0),a._index.set(l,d)}return a}static instantiateMiniSearch(e,t){const{documentCount:s,nextId:i,fieldIds:o,averageFieldLength:r,dirtCount:c,serializationVersion:a}=e;if(a!==1&&a!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new E(t);return u._documentCount=s,u._nextId=i,u._idToShortId=new Map,u._fieldIds=o,u._avgFieldLength=r,u._dirtCount=c||0,u._index=new T,u}executeQuery(e,t={}){if(e===E.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const d={...t,...e,queries:void 0},_=e.queries.map(g=>this.executeQuery(g,d));return this.combineResults(_,d.combineWith)}const{tokenize:s,processTerm:i,searchOptions:o}=this._options,r={tokenize:s,processTerm:i,...o,...t},{tokenize:c,processTerm:a}=r,f=c(e).flatMap(d=>a(d)).filter(d=>!!d).map(Ge(r)).map(d=>this.executeQuerySpec(d,r));return this.combineResults(f,r.combineWith)}executeQuerySpec(e,t){const s={...this._options.searchOptions,...t},i=(s.fields||this._options.fields).reduce((h,m)=>({...h,[m]:H(s.boost,m)||1}),{}),{boostDocument:o,weights:r,maxFuzzy:c,bm25:a}=s,{fuzzy:u,prefix:l}={...de.weights,...r},f=this._index.get(e.term),d=this.termResults(e.term,e.term,1,e.termBoost,f,i,o,a);let _,g;if(e.prefix&&(_=this._index.atPrefix(e.term)),e.fuzzy){const h=e.fuzzy===!0?.2:e.fuzzy,m=h<1?Math.min(c,Math.round(e.term.length*h)):h;m&&(g=this._index.fuzzyGet(e.term,m))}if(_)for(const[h,m]of _){const w=h.length-e.term.length;if(!w)continue;g==null||g.delete(h);const b=l*h.length/(h.length+.3*w);this.termResults(e.term,h,b,e.termBoost,m,i,o,a,d)}if(g)for(const h of g.keys()){const[m,w]=g.get(h);if(!w)continue;const b=u*h.length/(h.length+w);this.termResults(e.term,h,b,e.termBoost,m,i,o,a,d)}return d}executeWildcardQuery(e){const t=new Map,s={...this._options.searchOptions,...e};for(const[i,o]of this._documentIds){const r=s.boostDocument?s.boostDocument(o,"",this._storedFields.get(i)):1;t.set(i,{score:r,terms:[],match:{}})}return t}combineResults(e,t=oe){if(e.length===0)return new Map;const s=t.toLowerCase(),i=He[s];if(!i)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(i)||new Map}toJSON(){const e=[];for(const[t,s]of this._index){const i={};for(const[o,r]of s)i[o]=Object.fromEntries(r);e.push([t,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,i,o,r,c,a,u=new Map){if(o==null)return u;for(const l of Object.keys(r)){const f=r[l],d=this._fieldIds[l],_=o.get(d);if(_==null)continue;let g=_.size;const h=this._avgFieldLength[d];for(const m of _.keys()){if(!this._documentIds.has(m)){this.removeTerm(d,m,t),g-=1;continue}const w=c?c(this._documentIds.get(m),t,this._storedFields.get(m)):1;if(!w)continue;const b=_.get(m),W=this._fieldLength.get(m)[d],U=Ke(b,g,this._documentCount,W,h,a),D=s*i*f*w*U,z=u.get(m);if(z){z.score+=D,Ze(z.terms,e);const L=H(z.match,t);L?L.push(l):z.match[t]=[l]}else u.set(m,{score:D,terms:[e],match:{[t]:[l]}})}}return u}addTerm(e,t,s){const i=this._index.fetch(s,me);let o=i.get(e);if(o==null)o=new Map,o.set(t,1),i.set(e,o);else{const r=o.get(t);o.set(t,(r||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}const i=this._index.fetch(s,me),o=i.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,s):o.get(t)<=1?o.size<=1?i.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,i){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=i;const c=(this._avgFieldLength[t]||0)*s+i;this._avgFieldLength[t]=c/(s+1)}removeFieldLength(e,t,s,i){if(s===1){this._avgFieldLength[t]=0;return}const o=this._avgFieldLength[t]*s-i;this._avgFieldLength[t]=o/(s-1)}saveStoredFields(e,t){const{storeFields:s,extractField:i}=this._options;if(s==null||s.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const r of s){const c=i(t,r);c!==void 0&&(o[r]=c)}}}E.wildcard=Symbol("*");const H=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,He={[oe]:(n,e)=>{for(const t of e.keys()){const s=n.get(t);if(s==null)n.set(t,e.get(t));else{const{score:i,terms:o,match:r}=e.get(t);s.score=s.score+i,s.match=Object.assign(s.match,r),he(s.terms,o)}}return n},[we]:(n,e)=>{const t=new Map;for(const s of e.keys()){const i=n.get(s);if(i==null)continue;const{score:o,terms:r,match:c}=e.get(s);he(i.terms,r),t.set(s,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,c)})}return t},[Be]:(n,e)=>{for(const t of e.keys())n.delete(t);return n}},Qe={k:1.2,b:.7,d:.5},Ke=(n,e,t,s,i,o)=>{const{k:r,b:c,d:a}=o;return Math.log(1+(t-e+.5)/(e+.5))*(a+n*(r+1)/(n+r*(1-c+c*s/i)))},Ge=n=>(e,t,s)=>{const i=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,o=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,r=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:i,prefix:o,termBoost:r}},Q={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(et),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof(console==null?void 0:console[n])=="function"&&console[n](e)},autoVacuum:!0},de={combineWith:oe,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Qe},Xe={combineWith:we,prefix:(n,e,t)=>e===t.length-1},te={batchSize:1e3,batchWait:10},se={minDirtFactor:.1,minDirtCount:20},K={...te,...se},Ze=(n,e)=>{n.includes(e)||n.push(e)},he=(n,e)=>{for(const t of e)n.includes(t)||n.push(t)},fe=({score:n},{score:e})=>e-n,me=()=>new Map,q=n=>{const e=new Map;for(const t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},N=async n=>{const e=new Map;let t=0;for(const s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&await ve(0);return e},ve=n=>new Promise(e=>setTimeout(e,n)),et=/[\n\r\p{Z}\p{P}]+/u,tt=async()=>{const[n,e,t]=F(),{data:s,isSuccess:i}=await Z.get()[e.params.api]().tv().search().fetch();if(window.minisearch||(window.minisearch=new E({idField:S.tconst,fields:[S.tconst,S.primaryTitle,S.startYear],searchOptions:{boost:{[S.numVotes]:2},fuzzy:.2,prefix:!0}})),i&&s){window.minisearch.addAll(s);for(let o=0;o<s.length;o++){const r=s[o];t[r[S.tconst]]=r}n.value=!0}},st=Object.freeze(Object.defineProperty({__proto__:null,_hW:R,s_He9Y6Q0zRjY:tt},Symbol.toStringTag,{value:"Module"})),nt=n=>{const[e,t,s,i,o]=F();typeof n=="string"&&s(`/rategrid/tv/${t.params.api}/${n}`),e.value=!1,o.value="",i.value=[]},it=Object.freeze(Object.defineProperty({__proto__:null,_hW:R,s_nyNhEhcmnD4:nt},Symbol.toStringTag,{value:"Module"})),ot=()=>{const[n,e]=F();e.value&&(n.value=e.value.getBoundingClientRect().width)},rt=Object.freeze(Object.defineProperty({__proto__:null,_hW:R,s_pLKEt0twGJM:ot},Symbol.toStringTag,{value:"Module"})),ct=n=>{const{children:e,comboboxItemComponent:t,comboboxItemLabelComponent:s,...i}=n,o=t??G,r=s??X,c=Oe,a=new Map;let u=0,l=null,f,d=!1,_=null,g=!1,h=!1;return A(o,m=>{if(m._index=u,d=m.disabled===!0,m.value&&(_=m.value),m.children)return re(m.children)}),A(r,m=>{const w=m.children,b=_!==null?_:w;if(a.set(u,{value:b,displayValue:w,disabled:d}),n.value&&n.multiple)throw new Error("Qwik UI: When in multiple selection mode, the value prop is disabled. Use the bind:value prop's initial signal value instead.");b===n.value&&(l=u,f=b),u++}),A(c,()=>{g=!0}),A(Ce,()=>{h=!0}),re(e),I(ze,{...i,initialIndex:l,initialValue:f,_itemsMap:a,hasEmptyComp:g,hasErrorComp:h,children:e},0,"FX_0")},at=n=>ne("svg",{...n,children:V("path",null,{d:"m6 9 6 6 6-6"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"8g_0"),yt=n=>ne("svg",{...n,children:[V("path",null,{d:"m9 7-5 5 5 5"},null,3,null),V("path",null,{d:"m15 7 5 5-5 5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"8b_0"),wt=n=>ne("svg",{...n,children:[V("path",null,{d:"m20 17-5-5 5-5"},null,3,null),V("path",null,{d:"m4 17 5-5-5-5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"ZJ_0");function ut(n,e){const{delay:t=300,threshold:s=1/0}=e??{},i=Ie({timeoutId:void 0,debounced:0,isDebouncing:!1}),o=x(()=>k(()=>import("./q-3jyW3Rff.js").then(a=>a.i),[]),"s_9WlmVhW2aY8",[i]),r=x(()=>k(()=>import("./q-CyRU50gk.js"),[]),"s_wEV7y9J7n5w",[o,n]);return{clear:o,debounce:x(()=>k(()=>import("./q-Dla4ckt-.js"),[]),"s_xfzaIzsu7tg",[t,r,i,s]),force:r,isDebouncing:i.isDebouncing}}const vt=()=>{const n=ke(),e=Te(),t=O(),s=O(0),i=O(!1),o=O(!1),r=O(""),c=O([]),a={},u=ut(x(()=>k(()=>Promise.resolve().then(()=>dt),void 0),"s_02m08ECFatQ",[o,c,a]),{delay:10,threshold:1});J(x(()=>k(()=>Promise.resolve().then(()=>st),void 0),"s_He9Y6Q0zRjY",[i,e,a])),J(x(()=>k(()=>Promise.resolve().then(()=>ft),void 0),"s_T0f0cW01nNU",[u,r]));const l=x(()=>k(()=>Promise.resolve().then(()=>rt),void 0),"s_pLKEt0twGJM",[s,t]);return J(x(()=>k(()=>Promise.resolve().then(()=>_t),void 0),"s_gXu1RE1JfOc",[l])),Se("resize",l),I(ct,{placeholder:"The Office",ref:t,"bind:open":o,autoFocus:!0,filter:!1,onChange$:x(()=>k(()=>Promise.resolve().then(()=>it),void 0),"s_nyNhEhcmnD4",[o,e,n,c,r]),children:[I(Me,{children:"TV Series"},3,"sj_0"),I(Ee,{children:[I(Ve,{"bind:value":r,[v]:{"bind:value":v}},3,"sj_1"),I(Fe,{children:I(at,null,3,"sj_2")},1,"sj_3")]},1,"sj_4"),I(Le,{floating:"bottom-start",get style(){return{width:s.value}},children:i.value===!0?c.value.map(({[S.tconst]:d,[S.primaryTitle]:_,[S.startYear]:g})=>I(G,{value:d,children:[I(X,{children:_},1,"sj_5"),V("span",null,null,g,1,null)]},1,d)):I(G,{value:"error",children:I(X,{children:"Error: I have nothing to search..."},3,"sj_6"),[v]:{value:v}},1,"error"),[v]:{floating:v,style:xe(d=>({width:d.value}),[s])}},1,"sj_7")],[v]:{placeholder:v,ref:v,"bind:open":v,autoFocus:v,filter:v,onChange$:v}},1,"sj_8")},lt=n=>{const[e,t,s]=F();window.minisearch&&(t.value=window.minisearch.search(n).slice(0,10).map(({[S.tconst]:i})=>s[i]).sort((i,o)=>o[S.numVotes]-i[S.numVotes]),e.value=!0)},dt=Object.freeze(Object.defineProperty({__proto__:null,s_02m08ECFatQ:lt},Symbol.toStringTag,{value:"Module"})),ht=({track:n})=>{const[e,t]=F();n(t),e.debounce(t.value)},ft=Object.freeze(Object.defineProperty({__proto__:null,_hW:R,s_T0f0cW01nNU:ht},Symbol.toStringTag,{value:"Module"})),mt=()=>{const[n]=F();return n()},_t=Object.freeze(Object.defineProperty({__proto__:null,_hW:R,s_gXu1RE1JfOc:mt},Symbol.toStringTag,{value:"Module"}));export{wt as L,S as R,R as _hW,yt as a,ot as b,vt as c,lt as d,ht as e,mt as f,nt as s,tt as s_He9Y6Q0zRjY};
