import{g as u,q as l,_hW as c,u as A,r as h,G as E,o as M,x as k,i as R,j as m,k as v}from"./q-DkOvt7MH.js";import{_ as s}from"./q-CV_dOpHt.js";import{c as V,u as D}from"./q-CfYKGmsX.js";const T=async(i,t)=>{const[e,n,o]=u(),r=i.target;e.inputValueSig.value=r.value,o.value=!1,r.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,n&&(n.value=t.value,e.inputValueSig.value=t.value),e.mode!=="inline"&&(e.highlightedIndexSig.value=null)},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_tmjA6PR09Rk:T},Symbol.toStringTag,{value:"Module"})),L=async i=>{const[t,e,n,o]=u();if(!e.itemsMapSig.value)return;e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(o.value=e.inputValueSig.value.length===0);const r=l(()=>s(()=>Promise.resolve().then(()=>F),void 0),"s_H8X60SjkMqc",[e]);switch(i.key){case"ArrowDown":await r(t.getNextEnabledItemIndex$);break;case"ArrowUp":await r(t.getPrevEnabledItemIndex$);break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const d=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=d}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value&&e.mode!=="inline"||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))return;if(!e.multiple){if(e.mode==="inline")return;e.isListboxOpenSig.value=!1;return}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",n.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}},H=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_k0AmqObCVis:L},Symbol.toStringTag,{value:"Module"})),U=function(){const[t]=u();t.mode==="inline"&&(t.highlightedIndexSig.value=0)},q=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_niU8g2BU5jk:U},Symbol.toStringTag,{value:"Module"})),B=i=>{const[t,e,n]=u();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((n.value||e.value)&&t.inputValueSig.value.length===0){const o=[...t.selectedValuesSig.value];o.pop(),t.selectedValuesSig.value=o}}},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_fO7i6Qx5y1M:B},Symbol.toStringTag,{value:"Module"})),K=()=>{const[i]=u();if(!i.isListboxOpenSig.value&&i.mode==="popover")return"";const t=i.highlightedIndexSig.value;if(t===null||t===-1)return"";const e=i.itemsMapSig.value.get(t);return!e||e.disabled?"":`${i.localId}-${t}`},G=Object.freeze(Object.defineProperty({__proto__:null,s_Gm5HKJFIr4A:K},Symbol.toStringTag,{value:"Module"})),N=async i=>{const[t]=u();if(t.mode==="inline"||t.isListboxOpenSig.value){const e=t.highlightedIndexSig.value??-1;t.highlightedIndexSig.value=await i(e)}else t.isListboxOpenSig.value=!0},F=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_H8X60SjkMqc:N},Symbol.toStringTag,{value:"Module"})),Q=function(){const[t,e]=u(),{selectedValuesSig:n,multiple:o,itemsMapSig:r,highlightedIndexSig:d}=t,_=n.value,g=[];for(const[b,p]of r.value.entries())if((o?Array.isArray(_)&&_.includes(p.value):p.value===_)&&(g.push(p.displayValue),d.value=b,!o))break;e.value=o?g:g[0]||""},J=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_zAxGC8bC0a8:Q},Symbol.toStringTag,{value:"Module"})),Y=()=>{const[i,t]=u();return(i==null?void 0:i.value)??t.value??""},X=Object.freeze(Object.defineProperty({__proto__:null,s_0I90V9RBEcY:Y},Symbol.toStringTag,{value:"Module"}));class ne{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(n=>n!==t):[...e,t]}return this.initialValue===t?"":t}}function W(){const i=A(V);return{getNextEnabledItemIndex$:l(()=>s(()=>import("./q-ZdjC_90W.js"),[]),"s_0EJ9HYH5hxw",[i]),getPrevEnabledItemIndex$:l(()=>s(()=>import("./q-B8ktluCV.js").then(r=>r.u),[]),"s_geWyQHnZGhU",[i]),selectionManager$:l(()=>s(()=>import("./q-By_XQTkj.js"),[]),"s_o4ipzP29vFw",[i]),filterManager$:l(()=>s(()=>import("./q-D2CfTJIZ.js"),[]),"s_3lRUbF2zes4",[i])}}const oe=({"bind:value":i,...t})=>{const e=A(V),n={context:e,givenContextRef:e.inputRef},o=D(t.ref,n),r=`${e.localId}-panel`,d=`${e.localId}-inline`,_=`${e.localId}-input`,g=`${e.localId}-label`,b=`${e.localId}-description`,p=`${e.localId}-error-message`,I=h(),f=h(!1),x=h(!1),O=W(),S=E(l(()=>s(()=>Promise.resolve().then(()=>G),void 0),"s_Gm5HKJFIr4A",[e])),w=M(a=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(a.key)&&a.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),P=l(()=>s(()=>Promise.resolve().then(()=>H),void 0),"s_k0AmqObCVis",[O,e,x,f]),$=l(()=>s(()=>Promise.resolve().then(()=>C),void 0),"s_tmjA6PR09Rk",[e,i,x]),j=l(()=>s(()=>Promise.resolve().then(()=>z),void 0),"s_fO7i6Qx5y1M",[e,x,f]);k(l(()=>s(()=>Promise.resolve().then(()=>q),void 0),"s_niU8g2BU5jk",[e])),k(l(()=>s(()=>Promise.resolve().then(()=>J),void 0),"s_zAxGC8bC0a8",[e,I]));const y=E(l(()=>s(()=>Promise.resolve().then(()=>X),void 0),"s_0I90V9RBEcY",[i,I]));return R("input",{role:"combobox",get value(){return y.value},id:_,get"aria-activedescendant"(){return S.value},get"aria-expanded"(){return e.isExpandedSig.value},"aria-controls":e.mode==="inline"?d:r,"aria-labelledby":g,"aria-describedby":`${b} 
        ${p}`,"aria-autocomplete":"list",get"aria-haspopup"(){return e.mode==="inline"?void 0:"listbox"},ref:o,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[w,P,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?j:void 0,t.onKeyUp$],onInput$:[$,t.onInput$]},{role:v,value:m(a=>a.value,[y]),"aria-activedescendant":m(a=>a.value,[S]),"aria-expanded":m(a=>a.isExpandedSig.value,[e]),"aria-autocomplete":v,"aria-haspopup":m(a=>a.mode==="inline"?void 0:"listbox",[e]),autocomplete:v,"data-combobox-input":v,"data-invalid":m(a=>a.isInvalidSig.value?"":void 0,[e])},0,"aP_0")};export{ne as V,c as _hW,U as a,B as b,K as c,N as d,Q as e,Y as f,oe as g,L as s,T as s_tmjA6PR09Rk,W as u};
