import{u as L,g as x,B as S,r as g,G as O,N as B,q as m,l as u,k as a,F as h,_ as l,j as F,O as y,_hW as w}from"./q-DkOvt7MH.js";import{a as E,u as k,_ as b}from"./q-CROQm7W7.js";import{A as R,S as A,a as C}from"./q-B2Uhn6eE.js";import{R as e,L as Y,a as $,p as Q}from"./q-Xee3EtF_.js";import{c as D}from"./q-CIrWlV7l.js";import{a as M,T as V}from"./q-CbP3vdqO.js";import"./q-C3JSRctc.js";import"./q-nwL1slRA.js";function q(){return L(M)}const N=()=>{const[s,i]=x();return s.value!==null&&i.value},U=Object.freeze(Object.defineProperty({__proto__:null,s_tdj1590kPgo:N},Symbol.toStringTag,{value:"Module"})),tl=()=>{S();const s=E(),i=g(null),v=k(),r=q(),n=g(null),d=g(!0),c=g(!1),o=O(m(()=>b(()=>Promise.resolve().then(()=>U),void 0),"s_tdj1590kPgo",[i,c])),_={[e.tconst]:"",[e.primaryTitle]:"",[e.averageRating]:0,[e.numVotes]:0};B(m(()=>b(()=>Promise.resolve().then(()=>z),void 0),"s_4GIYZO7LQKE",[i,c,d,s,v,n]));const j=m(()=>b(()=>Promise.resolve().then(()=>Z),void 0),"s_lFqDbFw2DNU",[r]);return u(R,{isPending:d,get onPending(){return y(h,{children:"◔_◔ ..."})},onResolved:i.value===null?u(h,{children:"(/◔ ◡ ◔)/"},3,"vB_0"):u(R,{delay:1e3,isPending:o,get onPending(){return y(h,{children:"◔_◔ ..."})},onResolved:n.value!==null?u(A,{class:D("grow gap-y-6",r.isFullscreen&&"h-main",!r.isFullscreen&&"pb-12"),children:[l("div",null,{class:"gap-y-1"},[u(C,{level:2,children:n.value[e.primaryTitle],[a]:{level:a}},1,"vB_1"),l("div",null,{class:"text-ink-5 overflow-hidden text-xs text-ellipsis whitespace-nowrap"},[l("span",null,null,[n.value[e.startYear]," - ",n.value[e.endYear]],1,null),l("span",null,{class:"px-2"},"|",3,null),l("span",null,null,n.value[e.averageRating],1,null),l("span",null,{class:"px-2"},"|",3,null),l("span",null,null,n.value[e.genres].join(", "),1,null)],1,null)],1,null),l("div",null,{class:"grow overflow-auto"},l("div",null,{class:"rategrid",role:"region","aria-label":"ratings table",tabIndex:0},l("table",null,null,[l("thead",null,null,l("tr",null,null,[l("th",null,null,l("div",null,null,l("button",null,{type:"button",title:F(t=>`Click to ${t.isFullscreen?"enter":"exit"} fullscreen`,[r]),class:"cursor-pointer",onClick$:j},r.isFullscreen?u(Y,{class:"icon-collapse","aria-label":"collapse icon",[a]:{class:a,"aria-label":a}},3,"vB_2"):u($,{class:"icon-expand","aria-label":"expand icon",[a]:{class:a,"aria-label":a}},3,"vB_3"),1,null),1,null),1,null),n.value[e.seasonsIndex].map(t=>l("th",null,null,l("div",null,null,t,1,null),1,t))],1,null),1,null),l("tbody",null,null,n.value[e.episodeIndex].map(t=>l("tr",null,null,[l("th",null,null,l("div",null,null,t,1,null),1,null),n.value[e.seasonsIndex].map(P=>{var f,T;const p=((T=(f=n.value[e.episodeMap])==null?void 0:f[P])==null?void 0:T[t])??_,I=~~p[e.averageRating];return l("td",{class:D(p[e.averageRating]!==_[e.averageRating]&&`text-white bg-rating-${I-1}`),title:p[e.primaryTitle]},null,l("div",null,null,p[e.averageRating]!==_[e.averageRating]?p[e.averageRating]:"",1,null),1,`${P}-${t}`)})],1,t)),1,null)],1,null),1,null),1,null)]},1,"vB_4"):u(A,{children:l("p",null,null,["You might know ",l("span",null,{class:"bg-paper-9"},F(t=>t.value,[i]),3,null),", but i haven't heard of it :("],3,null)},3,"vB_5"),[a]:{delay:a,isPending:a,onPending:a}},3,"vB_6"),[a]:{isPending:a,onPending:a}},3,"vB_7")},G=async({track:s})=>{const[i,v,r,n,d,c]=x();if(s(()=>n.params.api),s(()=>n.url.searchParams),n.params.api in V||(d(new URL("/rategrid/tv",n.url).toString(),{replaceState:!0}),c.value=null),i.value=n.url.searchParams.get("id"),r.value=!1,i.value===null)return;v.value=!0;const o=(await Q.get()[n.params.api]().tv().details({id:i.value}).fetch()).data;window.document.title=`${o===null?"":`${o[e.primaryTitle]} (${o[e.startYear]}) | `}tv | rategrid`,c.value=o,v.value=!1},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_4GIYZO7LQKE:G},Symbol.toStringTag,{value:"Module"})),K=()=>{const[s]=x();s.isFullscreen=!s.isFullscreen},Z=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_lFqDbFw2DNU:K},Symbol.toStringTag,{value:"Module"}));export{G as a,K as b,tl as s,N as s_tdj1590kPgo,q as u};
