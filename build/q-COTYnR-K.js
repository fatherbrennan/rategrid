import{g as C,l as w,i as ne,_ as T,p as Se,q as x,r as M,N as A,J as xe,k as v,j as ke,_hW as L}from"./q-DkOvt7MH.js";import{_ as k,u as Te,a as Oe}from"./q-CV_dOpHt.js";import{f as q,p as re,H as ze,a as W,b as $,c as Ce,d as Me,e as Ee,g as Ve,h as Fe,i as Le,j as je}from"./q-B-sl8U8E.js";var Re=Object.defineProperty,ae=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,ce=(n,e,t)=>e in n?Re(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||(e={}))De.call(e,t)&&ce(n,t,e[t]);if(ae)for(var t of ae(e))Ae.call(e,t)&&ce(n,t,e[t]);return n},ue=(n,e,t)=>new Promise((s,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},r=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?s(c.value):Promise.resolve(c.value).then(o,r);a((t=t.apply(n,e)).next())}),qe={JSON:"application/json"},Ne={Default:"get"},p={Bit:"bit",Boolean:"boolean",ImdbMap:"imdbMap",ImdbMapIndex:"imdbMapIndex",ImdbTitleType:"imdbTitleType",Number:"number",String:"string",StringArray:"stringArray"},U=n=>{let e={};for(let t in n)e[t]=n[t].key,delete n[t];return e},le="imdb",Pe="tv",We="search.json";U({tconst:{key:"tconst",_required:!0,_type:p.String},titleType:{key:"titleType",_required:!0,_type:p.ImdbTitleType},primaryTitle:{key:"primaryTitle",_required:!0,_type:[p.String,p.Number]},originalTitle:{key:"originalTitle",_required:!0,_type:p.String},isAdult:{key:"isAdult",_required:!0,_type:p.Bit},startYear:{key:"startYear",_required:!1,_type:p.Number},endYear:{key:"endYear",_required:!1,_type:p.Number},runtimeMinutes:{key:"runtimeMinutes",_required:!1,_type:p.Number},genres:{key:"genres",_required:!1,_type:p.String}}),U({tconst:{key:"tconst",_required:!0,_type:p.String},parentTconst:{key:"parentTconst",_required:!0,_type:p.String},seasonNumber:{key:"seasonNumber",_required:!1,_type:p.Number},episodeNumber:{key:"episodeNumber",_required:!1,_type:p.Number}}),U({tconst:{key:"tconst",_required:!0,_type:p.String},averageRating:{key:"averageRating",_required:!0,_type:p.Number},numVotes:{key:"numVotes",_required:!0,_type:p.Number}});var S=U({tconst:{key:"id",_required:!0,_type:p.String},primaryTitle:{key:"pT",_required:!0,_type:p.String},startYear:{key:"sY",_required:!1,_type:p.Number},endYear:{key:"eY",_required:!1,_type:p.Number},runtimeMinutes:{key:"rM",_required:!1,_type:p.Number},averageRating:{key:"aR",_required:!0,_type:p.Number},numVotes:{key:"nV",_required:!0,_type:p.Number},isAdult:{key:"iA",_required:!0,_type:p.Boolean},genres:{key:"g",_required:!0,_type:p.StringArray},episodeIndex:{key:"eI",_required:!0,_type:p.ImdbMapIndex},seasonsIndex:{key:"sI",_required:!0,_type:p.ImdbMapIndex},episodeMap:{key:"eM",_required:!0,_type:p.ImdbMap}}),$e=n=>({[le]:()=>(n=new R({baseUrl:`/${le}`,requestInit:{headers:{accept:qe.JSON}}},n),{tv:()=>(n=new R({baseUrl:`/${Pe}`},n),{search:()=>(n=new R({baseUrl:`/${We}`},n),Z.prepareRequest(n)),details:({id:e})=>(n=new R({baseUrl:`/${e}.json`},n),Z.prepareRequest(n))})})}),_e=class{static encodeSubstring(n){return encodeURIComponent(n)}static query(n){let e=Object.keys(n);if(e.length===0)return"";let t="?";for(let s=0;s<e.length;s++){let i=e[s],o=n[i];o!==void 0&&(t+=`${i}=${this.encodeSubstring(o)}&`)}return t.slice(0,-1)}},R=class{constructor(n,e){this.baseUrl="",this.params={},this.requestInit={},this.responseType="json";var t;e&&(this.baseUrl=e.baseUrl,this.params=e.params,this.requestInit=e.requestInit,this.responseType=e.responseType),n.baseUrl&&(this.baseUrl+=n.baseUrl),this.params=V(V({},this.params),n.params),this.requestInit=V(V({},this.requestInit),n.requestInit),this.responseType=(t=n.responseType)!=null?t:this.responseType}},Z=class{static fetch(n,e){return ue(this,null,function*(){let t=new AbortController,s={controller:t,data:null,exception:null,hasException:!0,isAborted:!1,isSuccess:!1};try{let i=yield fetch(n,V({signal:t.signal},e.requestInit)),o=yield i[e.responseType]();return s.isSuccess=i.ok,s.hasException=!1,s.data=o,s}catch(i){return s.isSuccess=!1,s.hasException=!0,s.exception=i,i instanceof Error&&i.name==="AbortError"&&(s.isAborted=!0),s}})}static prepareRequest(n){let e=`${n.baseUrl}${_e.query(n.params)}`;return{url:e,request:n,fetch:()=>ue(this,null,function*(){return this.fetch(e,n)})}}static get(){let n=new R({baseUrl:`https://raw.githubusercontent.com/fatherbrennan/api/refs/heads/${Ne.Default}`,requestInit:{method:"GET"}});return V({},$e(n))}};const Ue="ENTRIES",pe="KEYS",ge="VALUES",y="";class H{constructor(e,t){const s=e._tree,i=Array.from(s.keys());this.set=e,this._type=t,this._path=i.length>0?[{node:s,keys:i}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=E(this._path);if(E(t)===y)return{done:!1,value:this.result()};const s=e.get(E(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=E(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>E(e)).filter(e=>e!==y).join("")}value(){return E(this._path).node.get(y)}result(){switch(this._type){case ge:return this.value();case pe:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const E=n=>n[n.length-1],Je=(n,e,t)=>{const s=new Map;if(e===void 0)return s;const i=e.length+1,o=i+t,r=new Uint8Array(o*i).fill(t+1);for(let a=0;a<i;++a)r[a]=a;for(let a=1;a<o;++a)r[a*i]=a;return be(n,e,t,s,r,1,i,""),s},be=(n,e,t,s,i,o,r,a)=>{const c=o*r;e:for(const u of n.keys())if(u===y){const l=i[c-1];l<=t&&s.set(a,[n.get(u),l])}else{let l=o;for(let f=0;f<u.length;++f,++l){const d=u[f],_=r*l,g=_-r;let h=i[_];const m=Math.max(0,l-t-1),I=Math.min(r-1,l+t);for(let b=m;b<I;++b){const Y=d!==e[b],B=i[g+b]+ +Y,D=i[g+b+1]+1,z=i[_+b]+1,j=i[_+b+1]=Math.min(B,D,z);j<h&&(h=j)}if(h>t)continue e}be(n.get(u),e,t,s,i,l,r,a+u)}};class O{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,s]=J(this._tree,e.slice(this._prefix.length));if(t===void 0){const[i,o]=ie(s);for(const r of i.keys())if(r!==y&&r.startsWith(o)){const a=new Map;return a.set(r.slice(o.length),i.get(r)),new O(a,e)}}return new O(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Ye(this._tree,e)}entries(){return new H(this,Ue)}forEach(e){for(const[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return Je(this._tree,e,t)}get(e){const t=ee(this._tree,e);return t!==void 0?t.get(y):void 0}has(e){const t=ee(this._tree,e);return t!==void 0&&t.has(y)}keys(){return new H(this,pe)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,Q(this._tree,e).set(y,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=Q(this._tree,e);return s.set(y,t(s.get(y))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=Q(this._tree,e);let i=s.get(y);return i===void 0&&s.set(y,i=t()),i}values(){return new H(this,ge)}[Symbol.iterator](){return this.entries()}static from(e){const t=new O;for(const[s,i]of e)t.set(s,i);return t}static fromObject(e){return O.from(Object.entries(e))}}const J=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(const s of n.keys())if(s!==y&&e.startsWith(s))return t.push([n,s]),J(n.get(s),e.slice(s.length),t);return t.push([n,e]),J(void 0,"",t)},ee=(n,e)=>{if(e.length===0||n==null)return n;for(const t of n.keys())if(t!==y&&e.startsWith(t))return ee(n.get(t),e.slice(t.length))},Q=(n,e)=>{const t=e.length;e:for(let s=0;n&&s<t;){for(const o of n.keys())if(o!==y&&e[s]===o[0]){const r=Math.min(t-s,o.length);let a=1;for(;a<r&&e[s+a]===o[a];)++a;const c=n.get(o);if(a===o.length)n=c;else{const u=new Map;u.set(o.slice(a),c),n.set(e.slice(s,s+a),u),n.delete(o),n=u}s+=a;continue e}const i=new Map;return n.set(e.slice(s),i),i}return n},Ye=(n,e)=>{const[t,s]=J(n,e);if(t!==void 0){if(t.delete(y),t.size===0)ye(s);else if(t.size===1){const[i,o]=t.entries().next().value;ve(s,i,o)}}},ye=n=>{if(n.length===0)return;const[e,t]=ie(n);if(e.delete(t),e.size===0)ye(n.slice(0,-1));else if(e.size===1){const[s,i]=e.entries().next().value;s!==y&&ve(n.slice(0,-1),s,i)}},ve=(n,e,t)=>{if(n.length===0)return;const[s,i]=ie(n);s.set(i+e,t),s.delete(i)},ie=n=>n[n.length-1],oe="or",we="and",Be="and_not";class F{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?X:e.autoVacuum;this._options={...K,...e,autoVacuum:t,searchOptions:{...de,...e.searchOptions||{}},autoSuggestOptions:{...Xe,...e.autoSuggestOptions||{}}},this._index=new O,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=se,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:s,processTerm:i,fields:o,idField:r}=this._options,a=t(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);if(this._idToShortId.has(a))throw new Error(`MiniSearch: duplicate ID ${a}`);const c=this.addDocumentId(a);this.saveStoredFields(c,e);for(const u of o){const l=t(e,u);if(l==null)continue;const f=s(l.toString(),u),d=this._fieldIds[u],_=new Set(f).size;this.addFieldLength(c,d,this._documentCount-1,_);for(const g of f){const h=i(g,u);if(Array.isArray(h))for(const m of h)this.addTerm(d,c,m);else h&&this.addTerm(d,c,h)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:s=10}=t,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:r}=e.reduce(({chunk:a,promise:c},u,l)=>(a.push(u),(l+1)%s===0?{chunk:[],promise:c.then(()=>new Promise(f=>setTimeout(f,0))).then(()=>this.addAll(a))}:{chunk:a,promise:c}),i);return r.then(()=>this.addAll(o))}remove(e){const{tokenize:t,processTerm:s,extractField:i,fields:o,idField:r}=this._options,a=i(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);const c=this._idToShortId.get(a);if(c==null)throw new Error(`MiniSearch: cannot remove document with ID ${a}: it is not in the index`);for(const u of o){const l=i(e,u);if(l==null)continue;const f=t(l.toString(),u),d=this._fieldIds[u],_=new Set(f).size;this.removeFieldLength(c,d,this._documentCount,_);for(const g of f){const h=s(g,u);if(Array.isArray(h))for(const m of h)this.removeTerm(d,c,m);else h&&this.removeTerm(d,c,h)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(a),this._fieldLength.delete(c),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new O,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,i)=>{this.removeFieldLength(t,i,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:i},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:s}=this._options,i=s(e,t);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=se,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,t){const s=this._dirtCount;if(this.vacuumConditionsMet(t)){const i=e.batchSize||te.batchSize,o=e.batchWait||te.batchWait;let r=1;for(const[a,c]of this._index){for(const[u,l]of c)for(const[f]of l)this._documentIds.has(f)||(l.size<=1?c.delete(u):l.delete(f));this._index.get(a).size===0&&this._index.delete(a),r%i===0&&await new Promise(u=>setTimeout(u,o)),r+=1}this._dirtCount-=s}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||X.minDirtCount,s=s||X.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const{searchOptions:s}=this._options,i={...s,...t},o=this.executeQuery(e,t),r=[];for(const[a,{score:c,terms:u,match:l}]of o){const f=u.length||1,d={id:this._documentIds.get(a),score:c*f,terms:Object.keys(l),queryTerms:u,match:l};Object.assign(d,this._storedFields.get(a)),(i.filter==null||i.filter(d))&&r.push(d)}return e===F.wildcard&&i.boostDocument==null||r.sort(fe),r}autoSuggest(e,t={}){t={...this._options.autoSuggestOptions,...t};const s=new Map;for(const{score:o,terms:r}of this.search(e,t)){const a=r.join(" "),c=s.get(a);c!=null?(c.score+=o,c.count+=1):s.set(a,{score:o,terms:r,count:1})}const i=[];for(const[o,{score:r,terms:a,count:c}]of s)i.push({suggestion:o,terms:a,score:r/c});return i.sort(fe),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static async loadJSONAsync(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)}static getDefault(e){if(K.hasOwnProperty(e))return G(K,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:a}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=N(i),c._fieldLength=N(o),c._storedFields=N(r);for(const[u,l]of c._documentIds)c._idToShortId.set(l,u);for(const[u,l]of s){const f=new Map;for(const d of Object.keys(l)){let _=l[d];a===1&&(_=_.ds),f.set(parseInt(d,10),N(_))}c._index.set(u,f)}return c}static async loadJSAsync(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:a}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=await P(i),c._fieldLength=await P(o),c._storedFields=await P(r);for(const[l,f]of c._documentIds)c._idToShortId.set(f,l);let u=0;for(const[l,f]of s){const d=new Map;for(const _ of Object.keys(f)){let g=f[_];a===1&&(g=g.ds),d.set(parseInt(_,10),await P(g))}++u%1e3===0&&await Ie(0),c._index.set(l,d)}return c}static instantiateMiniSearch(e,t){const{documentCount:s,nextId:i,fieldIds:o,averageFieldLength:r,dirtCount:a,serializationVersion:c}=e;if(c!==1&&c!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new F(t);return u._documentCount=s,u._nextId=i,u._idToShortId=new Map,u._fieldIds=o,u._avgFieldLength=r,u._dirtCount=a||0,u._index=new O,u}executeQuery(e,t={}){if(e===F.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const d={...t,...e,queries:void 0},_=e.queries.map(g=>this.executeQuery(g,d));return this.combineResults(_,d.combineWith)}const{tokenize:s,processTerm:i,searchOptions:o}=this._options,r={tokenize:s,processTerm:i,...o,...t},{tokenize:a,processTerm:c}=r,f=a(e).flatMap(d=>c(d)).filter(d=>!!d).map(Ke(r)).map(d=>this.executeQuerySpec(d,r));return this.combineResults(f,r.combineWith)}executeQuerySpec(e,t){const s={...this._options.searchOptions,...t},i=(s.fields||this._options.fields).reduce((h,m)=>({...h,[m]:G(s.boost,m)||1}),{}),{boostDocument:o,weights:r,maxFuzzy:a,bm25:c}=s,{fuzzy:u,prefix:l}={...de.weights,...r},f=this._index.get(e.term),d=this.termResults(e.term,e.term,1,e.termBoost,f,i,o,c);let _,g;if(e.prefix&&(_=this._index.atPrefix(e.term)),e.fuzzy){const h=e.fuzzy===!0?.2:e.fuzzy,m=h<1?Math.min(a,Math.round(e.term.length*h)):h;m&&(g=this._index.fuzzyGet(e.term,m))}if(_)for(const[h,m]of _){const I=h.length-e.term.length;if(!I)continue;g==null||g.delete(h);const b=l*h.length/(h.length+.3*I);this.termResults(e.term,h,b,e.termBoost,m,i,o,c,d)}if(g)for(const h of g.keys()){const[m,I]=g.get(h);if(!I)continue;const b=u*h.length/(h.length+I);this.termResults(e.term,h,b,e.termBoost,m,i,o,c,d)}return d}executeWildcardQuery(e){const t=new Map,s={...this._options.searchOptions,...e};for(const[i,o]of this._documentIds){const r=s.boostDocument?s.boostDocument(o,"",this._storedFields.get(i)):1;t.set(i,{score:r,terms:[],match:{}})}return t}combineResults(e,t=oe){if(e.length===0)return new Map;const s=t.toLowerCase(),i=He[s];if(!i)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(i)||new Map}toJSON(){const e=[];for(const[t,s]of this._index){const i={};for(const[o,r]of s)i[o]=Object.fromEntries(r);e.push([t,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,i,o,r,a,c,u=new Map){if(o==null)return u;for(const l of Object.keys(r)){const f=r[l],d=this._fieldIds[l],_=o.get(d);if(_==null)continue;let g=_.size;const h=this._avgFieldLength[d];for(const m of _.keys()){if(!this._documentIds.has(m)){this.removeTerm(d,m,t),g-=1;continue}const I=a?a(this._documentIds.get(m),t,this._storedFields.get(m)):1;if(!I)continue;const b=_.get(m),Y=this._fieldLength.get(m)[d],B=Ge(b,g,this._documentCount,Y,h,c),D=s*i*f*I*B,z=u.get(m);if(z){z.score+=D,Ze(z.terms,e);const j=G(z.match,t);j?j.push(l):z.match[t]=[l]}else u.set(m,{score:D,terms:[e],match:{[t]:[l]}})}}return u}addTerm(e,t,s){const i=this._index.fetch(s,me);let o=i.get(e);if(o==null)o=new Map,o.set(t,1),i.set(e,o);else{const r=o.get(t);o.set(t,(r||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}const i=this._index.fetch(s,me),o=i.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,s):o.get(t)<=1?o.size<=1?i.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,i){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=i;const a=(this._avgFieldLength[t]||0)*s+i;this._avgFieldLength[t]=a/(s+1)}removeFieldLength(e,t,s,i){if(s===1){this._avgFieldLength[t]=0;return}const o=this._avgFieldLength[t]*s-i;this._avgFieldLength[t]=o/(s-1)}saveStoredFields(e,t){const{storeFields:s,extractField:i}=this._options;if(s==null||s.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const r of s){const a=i(t,r);a!==void 0&&(o[r]=a)}}}F.wildcard=Symbol("*");const G=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,He={[oe]:(n,e)=>{for(const t of e.keys()){const s=n.get(t);if(s==null)n.set(t,e.get(t));else{const{score:i,terms:o,match:r}=e.get(t);s.score=s.score+i,s.match=Object.assign(s.match,r),he(s.terms,o)}}return n},[we]:(n,e)=>{const t=new Map;for(const s of e.keys()){const i=n.get(s);if(i==null)continue;const{score:o,terms:r,match:a}=e.get(s);he(i.terms,r),t.set(s,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,a)})}return t},[Be]:(n,e)=>{for(const t of e.keys())n.delete(t);return n}},Qe={k:1.2,b:.7,d:.5},Ge=(n,e,t,s,i,o)=>{const{k:r,b:a,d:c}=o;return Math.log(1+(t-e+.5)/(e+.5))*(c+n*(r+1)/(n+r*(1-a+a*s/i)))},Ke=n=>(e,t,s)=>{const i=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,o=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,r=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:i,prefix:o,termBoost:r}},K={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(et),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof(console==null?void 0:console[n])=="function"&&console[n](e)},autoVacuum:!0},de={combineWith:oe,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Qe},Xe={combineWith:we,prefix:(n,e,t)=>e===t.length-1},te={batchSize:1e3,batchWait:10},se={minDirtFactor:.1,minDirtCount:20},X={...te,...se},Ze=(n,e)=>{n.includes(e)||n.push(e)},he=(n,e)=>{for(const t of e)n.includes(t)||n.push(t)},fe=({score:n},{score:e})=>e-n,me=()=>new Map,N=n=>{const e=new Map;for(const t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},P=async n=>{const e=new Map;let t=0;for(const s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&await Ie(0);return e},Ie=n=>new Promise(e=>setTimeout(e,n)),et=/[\n\r\p{Z}\p{P}]+/u,tt=async()=>{const[n,e,t]=C();if(window.minisearch&&window.minisearch.documentCount!==0){n.value=!0;return}const{data:s,isSuccess:i}=await Z.get()[e.params.api]().tv().search().fetch();if(window.minisearch||(window.minisearch=new F({idField:S.tconst,fields:[S.tconst,S.primaryTitle,S.startYear],searchOptions:{boost:{[S.numVotes]:2},fuzzy:.2,prefix:!0}})),i&&s){window.minisearch.addAll(s);for(let o=0;o<s.length;o++){const r=s[o];t[r[S.tconst]]=r}n.value=!0}},st=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_He9Y6Q0zRjY:tt},Symbol.toStringTag,{value:"Module"})),nt=n=>{const[e,t,s,i,o]=C();typeof n=="string"&&s(`/rategrid/tv/${t.params.api}/${_e.query({id:n})}`),e.value=!1,o.value="",i.value=[]},it=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_nyNhEhcmnD4:nt},Symbol.toStringTag,{value:"Module"})),ot=()=>{const[n]=C();return n()},rt=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_JdyttROgjWk:ot},Symbol.toStringTag,{value:"Module"})),at=()=>{const[n,e]=C();e.value&&(n.value=e.value.getBoundingClientRect().width)},ct=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_pLKEt0twGJM:at},Symbol.toStringTag,{value:"Module"})),ut=n=>{const{children:e,comboboxItemComponent:t,comboboxItemLabelComponent:s,...i}=n,o=t??W,r=s??$,a=Ce,c=new Map;let u=0,l=null,f,d=!1,_=null,g=!1,h=!1;return q(o,m=>{if(m._index=u,d=m.disabled===!0,m.value&&(_=m.value),m.children)return re(m.children)}),q(r,m=>{const I=m.children,b=_!==null?_:I;if(c.set(u,{value:b,displayValue:I,disabled:d}),n.value&&n.multiple)throw new Error("Qwik UI: When in multiple selection mode, the value prop is disabled. Use the bind:value prop's initial signal value instead.");b===n.value&&(l=u,f=b),u++}),q(a,()=>{g=!0}),q(Me,()=>{h=!0}),re(e),w(ze,{...i,initialIndex:l,initialValue:f,_itemsMap:c,hasEmptyComp:g,hasErrorComp:h,children:e},0,"FX_0")},lt=n=>ne("svg",{...n,children:T("path",null,{d:"m6 9 6 6 6-6"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"8g_0"),wt=n=>ne("svg",{...n,children:[T("path",null,{d:"m9 7-5 5 5 5"},null,3,null),T("path",null,{d:"m15 7 5 5-5 5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"8b_0"),It=n=>ne("svg",{...n,children:[T("path",null,{d:"m20 17-5-5 5-5"},null,3,null),T("path",null,{d:"m4 17 5-5-5-5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"ZJ_0");function dt(n,e){const{delay:t=300,threshold:s=1/0}=e??{},i=Se({timeoutId:void 0,debounced:0,isDebouncing:!1}),o=x(()=>k(()=>import("./q-CidAwDJB.js").then(c=>c.i),[]),"s_9WlmVhW2aY8",[i]),r=x(()=>k(()=>import("./q-5mVreQtg.js"),[]),"s_wEV7y9J7n5w",[o,n]);return{clear:o,debounce:x(()=>k(()=>import("./q-DCuvXmQr.js"),[]),"s_xfzaIzsu7tg",[t,r,i,s]),force:r,isDebouncing:i.isDebouncing}}const St=()=>{const n=Te(),e=Oe(),t=M(),s=M(0),i=M(!1),o=M(!1),r=M(""),a=M([]),c={},u=dt(x(()=>k(()=>Promise.resolve().then(()=>ft),void 0),"s_02m08ECFatQ",[o,a,c]),{delay:10,threshold:1});A(x(()=>k(()=>Promise.resolve().then(()=>st),void 0),"s_He9Y6Q0zRjY",[i,e,c])),A(x(()=>k(()=>Promise.resolve().then(()=>_t),void 0),"s_T0f0cW01nNU",[u,r])),A(x(()=>k(()=>Promise.resolve().then(()=>gt),void 0),"s_gXu1RE1JfOc",[o,r]));const l=x(()=>k(()=>Promise.resolve().then(()=>ct),void 0),"s_pLKEt0twGJM",[s,t]);return A(x(()=>k(()=>Promise.resolve().then(()=>rt),void 0),"s_JdyttROgjWk",[l])),xe("resize",l),w(ut,{placeholder:"The Office",ref:t,"bind:open":o,filter:!1,onChange$:x(()=>k(()=>Promise.resolve().then(()=>it),void 0),"s_nyNhEhcmnD4",[o,e,n,a,r]),children:[w(Ee,{children:"TV Series"},3,"sj_0"),w(Ve,{children:[w(Fe,{"bind:value":r,[v]:{"bind:value":v}},3,"sj_1"),w(Le,{children:w(lt,null,3,"sj_2")},1,"sj_3")]},1,"sj_4"),w(je,{floating:"bottom-start",get style(){return{width:s.value}},children:i.value===!0?r.value.length>0?a.value.map(({[S.tconst]:d,[S.primaryTitle]:_,[S.startYear]:g})=>w(W,{value:d,children:[w($,{children:_},1,"sj_5"),T("span",null,null,g,1,null)]},1,d)):w(W,{value:"empty",children:w($,{children:[T("span",null,{class:"pr-2"},"(◔_◔)",3,null),T("span",null,null,"You need to give me something to search...",3,null)]},3,"sj_6"),[v]:{value:v}},1,"empty"):w(W,{value:"error",children:w($,{children:[T("span",null,{class:"pr-2"},"(◕︵◕)",3,null),T("span",null,null,"I’m sorry, but I have nothing to search...",3,null)]},3,"sj_7"),[v]:{value:v}},1,"error"),[v]:{floating:v,style:ke(d=>({width:d.value}),[s])}},1,"sj_8")],[v]:{placeholder:v,ref:v,"bind:open":v,filter:v,onChange$:v}},1,"sj_9")},ht=n=>{const[e,t,s]=C();window.minisearch&&(t.value=window.minisearch.search(n).slice(0,10).map(({[S.tconst]:i})=>s[i]).sort((i,o)=>o[S.numVotes]-i[S.numVotes]),t.value.length!==0&&(e.value=!0))},ft=Object.freeze(Object.defineProperty({__proto__:null,s_02m08ECFatQ:ht},Symbol.toStringTag,{value:"Module"})),mt=({track:n})=>{const[e,t]=C();n(t),e.debounce(t.value)},_t=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_T0f0cW01nNU:mt},Symbol.toStringTag,{value:"Module"})),pt=({track:n})=>{const[e,t]=C();n(e),t.value.length===0&&(e.value=!1)},gt=Object.freeze(Object.defineProperty({__proto__:null,_hW:L,s_gXu1RE1JfOc:pt},Symbol.toStringTag,{value:"Module"}));export{le as K,It as L,S as R,L as _hW,wt as a,ot as b,at as c,St as d,ht as e,mt as f,pt as g,Z as p,nt as s,tt as s_He9Y6Q0zRjY};
